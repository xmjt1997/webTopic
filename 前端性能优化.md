# 前端性能优化

### 浏览器渲染机制

```
1、浏览器采用流式布局 （Flow Based Layout）
2、浏览器首先会把Html解析成DOM，形成DOM树，把CSS解析成CSSOM，DOM树和CSSOM合并形成渲染树
3、浏览器根据渲染树就能根据每个DOM节点在页面中的位置和样式把DOM渲染到页面中。`
```

`table布局，遍历时会多次计算，消耗更多性能，避免使用table进行布局`

### 重绘

> DOM节点仅发生样式变化，或几何属性的变化不影响布局，称为重绘。（浏览器必须验证DOM树上的其他节点是否发生变化，消耗性能）



### 回流

> 回流是网页布局或几何属性发生了变化称为回流，回流及其消耗网页性能，因为涉及部分页面甚至整个网页的布局发生了变化或更新，一个DOM节点发生回流，可能会影响其所有子元素也发生回流……



`⭐重绘不一定会引发回流，回流一定会发生重绘`

​		浏览器通过队列机制来批量更新布局，浏览器会把修改操作放置到一个队列中，每16.6ms清空一次队列，当获取布局信息时候，队列中可能有会影响这些属性或方法返回值的操作，即使没有，浏览器也会强制清空队列触发回流与重绘来确保返回正确的值。

==获取布局的属性==

｛offsetTOP、offsetLeft、offsetWidth、offsetHeight……等｝



==避免的方法==

`CSS`

1. ​	使用transform来代替top，left等属性。
2. 使用visibility：hidden 来替代display：none
3. 避免使用table来布局
4. 尽可能在DOM树的最末端来改变class样式
5. 避免嵌套多层内联样式	css选择器不可过多 确保减少无意义的选择器
6. 将动画效果作用到position：flex或position：absolute上，避免影响其他DOM元素产生回流。
7. 避免使用CSS表达式
8. 使用CSS3硬件加速，使用transform、opacity、filters这些动画效果不会引起回流和重绘。

`JavaScript`

1. 避免频繁操作样式
2. 避免频繁操作DOM，
3. 不要频繁读取 获得位置信息等属性（==offsetTop==等等）
4. 对具有复杂动画的元素使用绝对定位让其脱离文档流。